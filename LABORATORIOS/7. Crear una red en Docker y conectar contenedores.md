
## Paso 1: Ver las redes existentes

Docker crea automáticamente algunas redes al instalarse.
Para verlas, ejecuta:

```bash
sudo docker network ls
```
La red `bridge` es la red por defecto para contenedores si no se especifica ninguna.

---

## Paso 2: Crear una red personalizada

Aunque podrías usar la red `bridge` por defecto, es **recomendable crear una red propia** para lograr mejor aislamiento y descubrimiento automático de contenedores.

Crea una red llamada `mi-red-app`:

```bash
sudo docker network create mi-red-app
```

Verifica que se haya creado:

```bash
docker network ls
```

---

## Paso 3: Crear y conectar contenedores a la red

Crea dos contenedores Nginx y conéctalos a la red `mi-red-app`:

```bash
docker run -d --name servidor-web-1 --network mi-red-app nginx
docker run -d --name servidor-web-2 --network mi-red-app nginx
```

**Explicación:**

* `--network mi-red-app`: conecta el contenedor a la red personalizada.
* `--name`: asigna un nombre único al contenedor.
* `-d`: ejecuta en modo “detached” (en segundo plano).

Verifica que ambos estén corriendo:

```bash
docker ps
```

---

## Paso 4: Inspeccionar la red

Usa el comando `inspect` para obtener información detallada de la red:

```bash
docker network inspect mi-red-app
```

Busca la sección `"Containers"`:

```json
"Containers": {
    "f3a2b1c4d5e6": {
        "Name": "servidor-web-1",
        "IPv4Address": "172.18.0.2/16"
    },
    "e7f8g9h0i1j2": {
        "Name": "servidor-web-2",
        "IPv4Address": "172.18.0.3/16"
    }
}
```

Esto confirma que ambos contenedores están en la misma red y pueden comunicarse.

---

## Paso 5: Probar la comunicación entre contenedores

Ya que los contenedores están en la misma red, pueden comunicarse **por nombre**, sin necesidad de conocer la IP.

Ejecuta un comando `curl` desde uno al otro:

```bash
docker exec -it servidor-web-1 curl http://servidor-web-2
```

**Salida esperada (HTML por defecto de Nginx):**

```
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
...
</html>
```

Esto demuestra que `servidor-web-1` puede comunicarse con `servidor-web-2` a través de la red `mi-red-app`.

---

## Paso 6: Conectar un contenedor en ejecución a una red

Si ya tienes un contenedor corriendo y deseas añadirlo a una red:

```bash
docker network connect mi-red-app nombre-o-id-del-contenedor
```

Ejemplo:

```bash
docker run -d --name contenedor-extra nginx
docker network connect mi-red-app contenedor-extra
```

Verifica:

```bash
docker network inspect mi-red-app
```

Ahora deberías ver también `contenedor-extra` en la lista de contenedores conectados.

---

## Paso 7: Desconectar un contenedor de una red

Para quitar un contenedor de una red, utiliza:

```bash
docker network disconnect mi-red-app servidor-web-1
```

Confirma con:

```bash
docker network inspect mi-red-app
```

Ya no aparecerá el contenedor `servidor-web-1` en la red.

---

## Paso 8: Eliminar una red

Antes de eliminar la red, asegúrate de **desconectar o eliminar los contenedores** que estén asociados a ella.

Luego, usa:

```bash
docker network rm mi-red-app
```

Verifica:

```bash
docker network ls
```

---

## Paso 9: Tipos de redes en Docker

| Tipo de red | Descripción                                         | Uso común                                       |
| ----------- | --------------------------------------------------- | ----------------------------------------------- |
| **bridge**  | Red local interna creada por Docker.                | Comunicación entre contenedores del mismo host. |
| **host**    | El contenedor comparte la red del host.             | Alto rendimiento, sin aislamiento.              |
| **none**    | Sin red asignada.                                   | Aislamiento total.                              |
| **overlay** | Red distribuida entre múltiples hosts.              | Usada en Docker Swarm o Kubernetes.             |
| **macvlan** | Asigna una IP única al contenedor en la red física. | Integración avanzada con redes del host.        |

---

## Paso 10: Usar redes en Docker Compose

También puedes definir redes en tu archivo `docker-compose.yml`:

```yaml
version: '3.9'

services:
  web:
    image: nginx
    networks:
      - mi-red-app

  app:
    image: alpine
    command: tail -f /dev/null
    networks:
      - mi-red-app

networks:
  mi-red-app:
    driver: bridge
```

Ejecuta con:

```bash
docker compose up -d
```

Ambos contenedores (`web` y `app`) estarán conectados automáticamente a la red `mi-red-app` y podrán comunicarse entre sí por nombre.


