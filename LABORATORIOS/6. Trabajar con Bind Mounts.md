## Paso 0: Preparar el entorno

Asegúrate de tener Docker instalado y funcionando:

```bash
docker --version
```

Y una imagen base (por ejemplo, `ubuntu` o `node`):

```bash
docker pull ubuntu:latest
```

Crea un directorio de trabajo en tu máquina host:

```bash
mkdir ~/docker_bindmount_demo
cd ~/docker_bindmount_demo
```

---

## Paso 1: Crear un archivo o carpeta en el host

Dentro del directorio de trabajo, crea un archivo o carpeta para compartir:

```bash
mkdir datos
echo "Hola desde el host" > datos/saludo.txt
```

Estructura actual:

```
~/docker_bindmount_demo/
└── datos/
    └── saludo.txt
```

---

## Paso 2: Montar un *Bind Mount* en un contenedor

Ejecuta un contenedor Ubuntu y monta el directorio `datos` del host dentro del contenedor:

```bash
sudo docker run -it \
  --name contenedor-bind \
  -v ~/docker_bindmount_demo/datos:/mnt/datos \
  ubuntu
```

**Explicación del comando:**

| Opción                             | Descripción                    |
| ---------------------------------- | ------------------------------ |
| `-it`                              | Modo interactivo con terminal  |
| `--name contenedor-bind`           | Asigna un nombre al contenedor |
| `-v <ruta_host>:<ruta_contenedor>` | Define el *bind mount*         |
| `ubuntu`                           | Imagen base                    |

---

## Paso 3: Verificar los archivos montados dentro del contenedor

Dentro del contenedor, lista los archivos en la carpeta montada:

```bash
ls /mnt/datos
cat /mnt/datos/saludo.txt
```

**Salida esperada:**

```
saludo.txt
Hola desde el host
```

Esto demuestra que el contenedor **está accediendo directamente a los archivos del host**.

---

## Paso 4: Crear o modificar archivos desde el contenedor

Dentro del contenedor, crea o edita un archivo:

```bash
echo "Archivo creado desde el contenedor" > /mnt/datos/desde_contenedor.txt
exit
```

Ahora, revisa el contenido desde el host:

```bash
cat ~/docker_bindmount_demo/datos/desde_contenedor.txt
```

Verás el texto `"Archivo creado desde el contenedor"`, lo que confirma que los cambios son **bidireccionales**.

---

## Paso 5: Usar Bind Mounts en modo lectura o escritura

Puedes montar un *bind mount* en modo **solo lectura (read-only)** para evitar que el contenedor modifique los archivos.

### Ejemplo:

```bash
sudo docker run -it \
  --name contenedor-ro \
  -v ~/docker_bindmount_demo/datos:/mnt/datos:ro \
  ubuntu
```

La opción `:ro` indica *read-only*.

Si intentas modificar un archivo desde el contenedor, obtendrás un error de permisos:

```bash
echo "Intento de escribir" > /mnt/datos/prueba.txt
# Error: Read-only file system
```

---

## Paso 6: Montar archivos individuales

También puedes montar un solo archivo, en lugar de un directorio completo.

Ejemplo:

```bash
sudo docker run -it \
  -v ~/docker_bindmount_demo/datos/saludo.txt:/mnt/saludo.txt \
  ubuntu
```

Dentro del contenedor:

```bash
cat /mnt/saludo.txt
```

Esto es útil cuando solo necesitas **exponer un archivo de configuración o credenciales** específicas.

---

## Paso 7: Usar Bind Mounts con rutas absolutas

Docker requiere **rutas absolutas** del host para los *bind mounts*.
Si usas variables o rutas relativas, asegúrate de convertirlas a absolutas antes.

Por ejemplo:

```bash
docker run -v $(pwd)/datos:/mnt/datos ubuntu
```

O en Windows PowerShell:

```powershell
docker run -v ${PWD}\datos:/mnt/datos ubuntu
```

---

## Paso 8: Usar Bind Mounts con Docker Compose

Puedes definir *bind mounts* directamente en el archivo `docker-compose.yml`:

```yaml
version: '3.8'
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
    volumes:
      - ./html:/usr/share/nginx/html:ro
```

**Explicación:**

* `./html` es una carpeta local del host.
* `/usr/share/nginx/html` es el directorio del contenedor donde Nginx sirve sus páginas.
* `:ro` hace que sea solo lectura.

Crea la carpeta y prueba:

```bash
mkdir html
echo "<h1>Hola desde Bind Mount</h1>" > html/index.html
docker compose up
```

Luego abre en tu navegador:
 **[http://localhost:8080](http://localhost:8080)**

Verás el mensaje “Hola desde Bind Mount”.

---

## Paso 9: Comparación — Bind Mount vs Volume

| Característica  | **Bind Mount**                                | **Volume**                                          |
| --------------- | --------------------------------------------- | --------------------------------------------------- |
| **Ubicación**   | En una ruta específica del host               | Administrado por Docker                             |
| **Creación**    | Manual (carpeta existente)                    | Automática con `docker volume create`               |
| **Rendimiento** | Más rápido para desarrollo local              | Más estable en producción                           |
| **Visibilidad** | Puedes ver y editar directamente los archivos | Docker los administra en `/var/lib/docker/volumes`  |
| **Seguridad**   | Más propenso a errores si se monta mal        | Más controlado y seguro                             |
| **Ideal para**  | Desarrollo local, edición de código en vivo   | Producción, bases de datos, persistencia controlada |

---

## Eliminar contenedores y limpiar montajes

Para detener y eliminar los contenedores creados:

```bash
docker stop contenedor-bind contenedor-ro
docker rm contenedor-bind contenedor-ro
```

El *bind mount* **no se elimina**, ya que pertenece al sistema de archivos del host.
Si lo deseas, puedes eliminar los archivos manualmente:

```bash
rm -rf ~/docker_bindmount_demo
```

---
