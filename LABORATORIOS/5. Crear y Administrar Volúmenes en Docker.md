## ⚙️ Paso 0: Crear una imagen base o usar una existente

Antes de comenzar, asegúrate de tener una **imagen base** para tus contenedores.
Por ejemplo, puedes descargar la imagen oficial de **Ubuntu** o **MongoDB**:

```bash
docker pull ubuntu:latest
docker pull mongo:latest
```

Esto garantizará que tengas imágenes listas para montar volúmenes.

---

## Paso 1: Mostrar todos los volúmenes existentes

Lista todos los volúmenes Docker presentes en tu sistema:

```bash
sudo docker volume ls
```

Esto muestra los volúmenes creados con el **controlador local**, que es el valor predeterminado.

---

## Paso 2: Crear un nuevo volumen

Crea un volumen llamado `geeksforgeeks`:

```bash
sudo docker volume create geeksforgeeks
```

Puedes verificar su creación con:

```bash
sudo docker volume ls
```

---

## Paso 3: Inspeccionar un volumen

Obtén detalles completos del volumen (ubicación, driver, etiquetas, etc.):

```bash
sudo docker volume inspect geeksforgeeks
```

**Información devuelta:**

* Ruta del volumen en el host (`Mountpoint`)
* Fecha de creación
* Controlador utilizado (`local`)
* Estado y opciones del volumen

---

## Paso 4: Montar un volumen en un contenedor

Crea un contenedor basado en **Ubuntu** y monta el volumen `geeksforgeeks` dentro del directorio `/volumen-compartido`:

```bash
sudo docker run -it -v geeksforgeeks:/volumen-compartido --name mi-contenedor-01 ubuntu
```

**Explicación:**

* `-v geeksforgeeks:/volumen-compartido`: indica que el volumen `geeksforgeeks` se montará dentro del contenedor en `/volumen-compartido`.
* `--name mi-contenedor-01`: asigna un nombre al contenedor.
* `ubuntu`: es la imagen base que se ejecutará.

---

## Paso 5: Crear un archivo dentro del volumen

Dentro del contenedor, ejecuta los siguientes comandos:

```bash
ls
cd /volumen-compartido
echo "GeeksforGeeks" > geeksforgeeks.txt
ls
exit
```

Este archivo `geeksforgeeks.txt` se guardará **dentro del volumen persistente**, no solo dentro del contenedor.

---

## Paso 6: Crear otro contenedor y compartir el mismo volumen

Crea un **segundo contenedor** que monte el mismo volumen para verificar la persistencia de datos:

```bash
sudo docker run -it -v geeksforgeeks:/volumen-compartido --name mi-contenedor-02 ubuntu
```

Dentro del nuevo contenedor:

```bash
cd /volumen-compartido
ls
cat geeksforgeeks.txt
```

Verás el archivo `geeksforgeeks.txt` creado anteriormente.
Esto demuestra que **ambos contenedores comparten el mismo volumen**.

---

## Paso 7: Eliminar un volumen

Antes de eliminar un volumen, asegúrate de que **ningún contenedor lo esté usando**.
Luego, elimina el volumen:

```bash
docker volume rm geeksforgeeks
```

**Advertencia:** Esto elimina permanentemente todos los datos almacenados en ese volumen.

---

## Paso 8: Iniciar un contenedor con un volumen (ejemplo MongoDB)

Crea e inicia un contenedor MongoDB con un volumen llamado `mongovol` para almacenar sus datos:

```bash
docker run -d --name mongo \
  -v mongovol:/data/db \
  -e MONGO_INITDB_ROOT_USERNAME=devdb \
  -e MONGO_INITDB_ROOT_PASSWORD=devdb123 \
  mongo
```

**Explicación:**

* `-v mongovol:/data/db`: monta el volumen `mongovol` en el directorio `/data/db` dentro del contenedor.
* `-e`: define variables de entorno (usuario y contraseña del root de MongoDB).

---

## Paso 9: Usar volúmenes con Docker Compose

Puedes montar volúmenes fácilmente desde un archivo `docker-compose.yml`:

```yaml
version: '3'
services:
  frontend:
    image: node:lts
    volumes:
      - mongovol:/data/db

volumes:
  mongovol:
```

**Explicación:**

* `services`: define los contenedores (en este caso, `frontend`).
* `volumes`: indica los volúmenes montados.
* `mongovol:/data/db`: crea o reutiliza un volumen llamado `mongovol` y lo monta en `/data/db`.
* En la raíz (`volumes:`) se declara el volumen con nombre.

---

## Diferencias entre `-v` y `--mount`

| Característica                | `-v`                           | `--mount`                                                   |
| ----------------------------- | ------------------------------ | ----------------------------------------------------------- |
| **Sintaxis**                  | Más corta y simple             | Más explícita y flexible                                    |
| **Usos comunes**              | Montajes básicos               | Montajes avanzados (controladores, solo lectura, etiquetas) |
| **Compatibilidad**            | Volúmenes locales o con nombre | Volúmenes locales, remotos o personalizados                 |
| **Configuraciones avanzadas** | Limitadas                      | Más completas (drivers, permisos, opciones)                 |

Recomendación:

* Usa **`-v`** para pruebas rápidas y configuraciones simples.
* Usa **`--mount`** para entornos de producción o configuraciones detalladas.

---

## Rellenar un volumen usando un contenedor

1️⃣ **Crear el volumen:**

```bash
docker volume create mi_volumen
```

2️⃣ **Ejecutar un contenedor para llenarlo:**

```bash
docker run -d --name mongo \
  -v mongovol:/data/db \
  -e MONGO_INITDB_ROOT_USERNAME=devdb \
  -e MONGO_INITDB_ROOT_PASSWORD=devdb123 \
  mongo
```

3️⃣ **Verificar el contenido del volumen:**

```bash
docker run --rm -v mongovol:/data/db busybox ls /data/db
```

---

## Crear un volumen usando un controlador

Puedes crear volúmenes personalizados usando controladores como `sshfs` o `nfs`:

```bash
docker volume create --driver vieux/sshfs <nombre_del_volumen>
```

Esto permite crear volúmenes en sistemas remotos o de red.

---

## Ejemplo de servicio NFS en Docker Compose

```yaml
version: '3'
services:
  nfs-server:
    image: tomcat:latest
    container_name: nfs_container
    volumes:
      - /data:/nfs_share

  nfs-client:
    image: busybox
    container_name: nfs_client
    command: tail -f /dev/null
    volumes:
      - nfs-data:/data

volumes:
  nfs-data:
    driver_opts:
      type: nfs
```

**Explicación:**

* **nfs-server**: comparte el directorio `/data` del host como `/nfs_share`.
* **nfs-client**: monta el volumen remoto `nfs-data` en `/data`.
* **nfs-data**: volumen definido con `type: nfs` para compartir archivos entre ambos contenedores.

¿Quieres que te lo prepare como archivo descargable `Docker-Volumenes-Guia.md` para usarlo como documentación o material de capacitación? Puedo generarlo inmediatamente.
